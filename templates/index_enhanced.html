<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VabHub - 智能媒体管理平台</title>
    
    <!-- Vue 3 + Vuetify 3.3.0 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vuetify@3.3.0/dist/vuetify.js"></script>
    <link href="https://unpkg.com/vuetify@3.3.0/dist/vuetify.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    
    <!-- Socket.io for real-time updates -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .vabhub-app {
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .vabhub-navbar {
            background: linear-gradient(135deg, #1976D2 0%, #1565C0 100%);
            box-shadow: 0 4px 20px rgba(25, 118, 210, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .vabhub-sidebar {
            background: linear-gradient(180deg, #263238 0%, #37474F 100%);
            color: white;
            height: calc(100vh - 64px);
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .vabhub-content {
            background: #fafafa;
            min-height: calc(100vh - 64px);
            padding: 24px;
            overflow-y: auto;
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border-left: 6px solid #1976D2;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #1976D2, #64B5F6);
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .stat-card.video { border-left-color: #F44336; }
        .stat-card.audio { border-left-color: #2196F3; }
        .stat-card.image { border-left-color: #4CAF50; }
        .stat-card.document { border-left-color: #FF9800; }
        
        .file-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 12px;
            border-left: 4px solid #1976D2;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .file-item:hover {
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transform: translateX(4px);
            border-left-color: #64B5F6;
        }
        
        .progress-custom {
            height: 10px;
            border-radius: 5px;
            background: #e0e0e0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar-custom {
            height: 100%;
            background: linear-gradient(90deg, #1976D2, #64B5F6);
            transition: width 0.5s ease;
            position: relative;
        }
        
        .progress-bar-custom::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .nav-item-active {
            background: rgba(255,255,255,0.15) !important;
            border-left: 4px solid #1976D2 !important;
            border-radius: 8px;
            margin: 4px 8px;
        }
        
        .feature-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            text-align: center;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 32px;
            background: linear-gradient(135deg, #1976D2, #64B5F6);
            color: white;
        }
        
        .music-player {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 20px;
            color: white;
            margin: 20px 0;
        }
        
        .waveform {
            height: 60px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            margin: 16px 0;
            position: relative;
            overflow: hidden;
        }
        
        .waveform-bar {
            position: absolute;
            bottom: 0;
            width: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 2px;
            animation: wave 1.5s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { height: 20%; }
            50% { height: 80%; }
        }
        
        .dark-mode {
            background: #1a1a1a;
            color: white;
        }
        
        .dark-mode .vabhub-content {
            background: #2d2d2d;
        }
        
        .dark-mode .stat-card,
        .dark-mode .file-item,
        .dark-mode .feature-card {
            background: #3d3d3d;
            color: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .responsive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="app">
        <v-app :class="{ 'dark-mode': darkMode }" class="vabhub-app">
            <!-- 导航栏 -->
            <v-app-bar class="vabhub-navbar" elevation="0">
                <v-app-bar-nav-icon @click="drawer = !drawer" color="white"></v-app-bar-nav-icon>
                
                <v-app-bar-title class="text-white">
                    <v-icon icon="fas fa-cloud" class="mr-2"></v-icon>
                    VabHub - 智能媒体管理平台
                </v-app-bar-title>
                
                <v-spacer></v-spacer>
                
                <!-- 搜索框 -->
                <v-text-field
                    v-model="globalSearch"
                    placeholder="搜索文件、音乐、设置..."
                    prepend-inner-icon="fas fa-search"
                    variant="outlined"
                    density="compact"
                    hide-details
                    class="mr-4"
                    style="max-width: 300px;"
                    color="white"
                ></v-text-field>
                
                <!-- 通知按钮 -->
                <v-btn icon color="white" class="mr-2" @click="showNotifications = true">
                    <v-icon>fas fa-bell</v-icon>
                    <v-badge v-if="unreadNotifications > 0" color="red" :content="unreadNotifications" dot></v-badge>
                </v-btn>
                
                <!-- 主题切换 -->
                <v-btn icon color="white" class="mr-2" @click="toggleDarkMode">
                    <v-icon>{{ darkMode ? 'fas fa-sun' : 'fas fa-moon' }}</v-icon>
                </v-btn>
                
                <!-- 用户菜单 -->
                <v-menu>
                    <template v-slot:activator="{ props }">
                        <v-btn icon color="white" v-bind="props">
                            <v-icon>fas fa-user</v-icon>
                        </v-btn>
                    </template>
                    <v-list>
                        <v-list-item @click="showProfile">
                            <v-list-item-title>个人资料</v-list-item-title>
                        </v-list-item>
                        <v-list-item @click="showSettings">
                            <v-list-item-title>系统设置</v-list-item-title>
                        </v-list-item>
                        <v-list-item @click="logout">
                            <v-list-item-title>退出登录</v-list-item-title>
                        </v-list-item>
                    </v-list>
                </v-menu>
            </v-app-bar>

            <!-- 侧边栏 -->
            <v-navigation-drawer v-model="drawer" class="vabhub-sidebar" permanent>
                <v-list density="comfortable" nav>
                    <v-list-item
                        v-for="item in navItems"
                        :key="item.title"
                        :prepend-icon="item.icon"
                        :title="item.title"
                        :value="item.title"
                        :class="{ 'nav-item-active': activeNav === item.title }"
                        @click="activeNav = item.title"
                        color="white"
                    >
                        <template v-slot:append v-if="item.badge">
                            <v-badge :content="item.badge" color="red" dot></v-badge>
                        </template>
                    </v-list-item>
                </v-list>
                
                <!-- 系统状态 -->
                <v-card class="ma-3 mt-auto" color="rgba(255,255,255,0.1)" variant="flat">
                    <v-card-text class="text-center">
                        <div class="text-caption text-white">系统状态</div>
                        <v-progress-linear
                            :model-value="systemStats.cpu"
                            color="primary"
                            height="8"
                            class="my-2"
                        ></v-progress-linear>
                        <div class="text-caption text-white">CPU: {{ systemStats.cpu }}%</div>
                        <v-progress-linear
                            :model-value="systemStats.memory"
                            color="secondary"
                            height="8"
                            class="my-2"
                        ></v-progress-linear>
                        <div class="text-caption text-white">内存: {{ systemStats.memory }}%</div>
                    </v-card-text>
                </v-card>
            </v-navigation-drawer>

            <!-- 主内容区域 -->
            <v-main class="vabhub-content">
                <!-- 仪表板 -->
                <div v-if="activeNav === '仪表板'">
                    <!-- 欢迎横幅 -->
                    <v-card class="mb-6" color="primary" dark>
                        <v-card-text class="text-center py-8">
                            <v-icon size="64" class="mb-4">fas fa-cloud</v-icon>
                            <h1 class="text-h4 mb-2">欢迎使用 VabHub</h1>
                            <p class="text-h6">智能媒体管理平台 - 让您的媒体文件管理更简单</p>
                        </v-card-text>
                    </v-card>

                    <!-- 功能卡片网格 -->
                    <div class="responsive-grid">
                        <v-card class="feature-card" @click="activeNav = '文件扫描'">
                            <div class="feature-icon">
                                <v-icon>fas fa-search</v-icon>
                            </div>
                            <h3 class="text-h6 mb-2">智能扫描</h3>
                            <p class="text-caption text-grey">自动扫描和识别媒体文件</p>
                        </v-card>
                        
                        <v-card class="feature-card" @click="activeNav = '音乐管理'">
                            <div class="feature-icon" style="background: linear-gradient(135deg, #2196F3, #64B5F6);">
                                <v-icon>fas fa-music</v-icon>
                            </div>
                            <h3 class="text-h6 mb-2">音乐管理</h3>
                            <p class="text-caption text-grey">音频指纹识别和元数据刮削</p>
                        </v-card>
                        
                        <v-card class="feature-card" @click="activeNav = '智能重命名'">
                            <div class="feature-icon" style="background: linear-gradient(135deg, #4CAF50, #81C784);">
                                <v-icon>fas fa-edit</v-icon>
                            </div>
                            <h3 class="text-h6 mb-2">智能重命名</h3>
                            <p class="text-caption text-grey">基于AI的文件重命名</p>
                        </v-card>
                        
                        <v-card class="feature-card" @click="activeNav = '批量处理'">
                            <div class="feature-icon" style="background: linear-gradient(135deg, #FF9800, #FFB74D);">
                                <v-icon>fas fa-tasks</v-icon>
                            </div>
                            <h3 class="text-h6 mb-2">批量处理</h3>
                            <p class="text-caption text-grey">高效批量处理媒体文件</p>
                        </v-card>
                    </div>

                    <!-- 统计信息 -->
                    <v-row class="mt-6">
                        <v-col cols="12" sm="6" md="3">
                            <v-card class="stat-card video">
                                <v-card-text>
                                    <div class="d-flex align-center">
                                        <v-icon icon="fas fa-film" color="red" size="48" class="mr-3"></v-icon>
                                        <div>
                                            <div class="text-h4 font-weight-bold">{{ stats.mediaFiles }}</div>
                                            <div class="text-caption text-grey">媒体文件</div>
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                        
                        <v-col cols="12" sm="6" md="3">
                            <v-card class="stat-card audio">
                                <v-card-text>
                                    <div class="d-flex align-center">
                                        <v-icon icon="fas fa-check-circle" color="green" size="48" class="mr-3"></v-icon>
                                        <div>
                                            <div class="text-h4 font-weight-bold">{{ stats.processed }}</div>
                                            <div class="text-caption text-grey">已处理</div>
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                        
                        <v-col cols="12" sm="6" md="3">
                            <v-card class="stat-card image">
                                <v-card-text>
                                    <div class="d-flex align-center">
                                        <v-icon icon="fas fa-sync-alt" color="orange" size="48" class="mr-3"></v-icon>
                                        <div>
                                            <div class="text-h4 font-weight-bold">{{ stats.processing }}</div>
                                            <div class="text-caption text-grey">进行中</div>
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                        
                        <v-col cols="12" sm="6" md="3">
                            <v-card class="stat-card document">
                                <v-card-text>
                                    <div class="d-flex align-center">
                                        <v-icon icon="fas fa-clock" color="blue" size="48" class="mr-3"></v-icon>
                                        <div>
                                            <div class="text-h4 font-weight-bold">{{ stats.pending }}</div>
                                            <div class="text-caption text-grey">待处理</div>
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                    </v-row>

                    <!-- 实时任务监控 -->
                    <v-row class="mt-6">
                        <v-col cols="12" md="8">
                            <v-card elevation="2" class="pa-4">
                                <v-card-title class="text-h6">
                                    <v-icon icon="fas fa-tasks" class="mr-2"></v-icon>
                                    实时任务监控
                                </v-card-title>
                                
                                <v-card-text>
                                    <div v-for="task in tasks" :key="task.name" class="mb-4">
                                        <div class="d-flex justify-space-between mb-2">
                                            <span class="font-weight-medium">{{ task.name }}</span>
                                            <span>{{ task.progress }}%</span>
                                        </div>
                                        <div class="progress-custom">
                                            <div class="progress-bar-custom" :style="{ width: task.progress + '%' }"></div>
                                        </div>
                                        <div class="text-caption text-grey mt-1">
                                            当前文件: {{ task.currentFile || '等待中...' }}
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                        
                        <v-col cols="12" md="4">
                            <v-card elevation="2" class="pa-4">
                                <v-card-title class="text-h6">
                                    <v-icon icon="fas fa-chart-pie" class="mr-2"></v-icon>
                                    文件类型分布
                                </v-card-title>
                                <v-card-text>
                                    <canvas id="fileTypeChart" width="200" height="200"></canvas>
                                </v-card-text>
                            </v-card>
                        </v-col>
                    </v-row>

                    <!-- 最近活动 -->
                    <v-row class="mt-6">
                        <v-col cols="12">
                            <v-card elevation="2" class="pa-4">
                                <v-card-title class="text-h6">
                                    <v-icon icon="fas fa-history" class="mr-2"></v-icon>
                                    最近活动
                                </v-card-title>
                                
                                <v-card-text>
                                    <div v-for="file in recentFiles" :key="file.name" class="file-item">
                                        <div class="d-flex align-center justify-space-between">
                                            <div class="d-flex align-center">
                                                <v-icon 
                                                    :icon="file.icon" 
                                                    :color="file.color" 
                                                    size="28" 
                                                    class="mr-3"
                                                ></v-icon>
                                                <div>
                                                    <div class="font-weight-medium">{{ file.name }}</div>
                                                    <div class="text-caption text-grey">{{ file.path }}</div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <v-chip :color="file.statusColor" size="small">{{ file.status }}</v-chip>
                                                <div class="text-caption text-grey mt-1">{{ file.time }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </v-card-text>
                            </v-card>
                        </v-col>
                    </v-row>
                </div>

                <!-- 音乐管理页面 -->
                <div v-else-if="activeNav === '音乐管理'">
                    <!-- 音乐管理页面内容保持不变，但使用新的样式 -->
                    <!-- 这里的内容与之前的音乐管理页面相同，但使用新的样式类 -->
                </div>

                <!-- 其他页面 -->
                <div v-else>
                    <v-card elevation="2" class="pa-4">
                        <v-card-title class="text-h5 font-weight-bold">
                            <v-icon :icon="getCurrentNavIcon()" class="mr-2"></v-icon>
                            {{ activeNav }}
                        </v-card-title>
                        <v-card-text>
                            <p class="text-grey">功能正在开发中...</p>
                            <v-progress-linear indeterminate class="mt-4"></v-progress-linear>
                        </v-card-text>
                    </v-card>
                </div>
            </v-main>
        </v-app>
    </div>

    <script>
        const { createApp } = Vue;
        const { createVuetify } = Vuetify;

        const vuetify = createVuetify();

        const app = createApp({
            data() {
                return {
                    drawer: true,
                    darkMode: false,
                    activeNav: '仪表板',
                    globalSearch: '',
                    showNotifications: false,
                    unreadNotifications: 3,
                    
                    navItems: [
                        { title: '仪表板', icon: 'fas fa-tachometer-alt', badge: 0 },
                        { title: '文件扫描', icon: 'fas fa-search', badge: 2 },
                        { title: '智能重命名', icon: 'fas fa-edit', badge: 1 },
                        { title: '批量处理', icon: 'fas fa-tasks', badge: 0 },
                        { title: '音乐管理', icon: 'fas fa-music', badge: 5 },
                        { title: '系统设置', icon: 'fas fa-cog', badge: 0 },
                        { title: '系统监控', icon: 'fas fa-chart-line', badge: 0 }
                    ],
                    
                    stats: {
                        mediaFiles: 1284,
                        processed: 856,
                        processing: 128,
                        pending: 300
                    },
                    
                    tasks: [
                        { 
                            name: '视频文件重命名', 
                            progress: 65, 
                            currentFile: '奥本海默.2023.2160p.BluRay.REMUX.mkv' 
                        },
                        { 
                            name: '音频文件整理', 
                            progress: 42, 
                            currentFile: '周杰伦-七里香.mp3' 
                        },
                        { 
                            name: '图片文件分类', 
                            progress: 78, 
                            currentFile: '风景照片.jpg' 
                        }
                    ],
                    
                    recentFiles: [
                        { 
                            name: '权力的游戏.S01E01.1080p.mkv', 
                            path: '/media/videos/', 
                            icon: 'fas fa-video', 
                            color: 'red', 
                            status: '已重命名', 
                            statusColor: 'success', 
                            time: '2分钟前' 
                        },
                        { 
                            name: '周杰伦-七里香.mp3', 
                            path: '/media/music/', 
                            icon: 'fas fa-music', 
                            color: 'blue', 
                            status: '处理中', 
                            statusColor: 'warning', 
                            time: '5分钟前' 
                        },
                        { 
                            name: '风景照片.jpg', 
                            path: '/media/pictures/', 
                            icon: 'fas fa-image', 
                            color: 'green', 
                            status: '待处理', 
                            statusColor: 'primary', 
                            time: '10分钟前' 
                        }
                    ],
                    
                    systemStats: {
                        cpu: 24,
                        memory: 68,
                        disk: 82,
                        network: '156M/s'
                    }
                }
            },
            
            methods: {
                toggleDarkMode() {
                    this.darkMode = !this.darkMode;
                    localStorage.setItem('darkMode', this.darkMode);
                },
                
                getCurrentNavIcon() {
                    const item = this.navItems.find(item => item.title === this.activeNav);
                    return item ? item.icon : 'fas fa-cog';
                },
                
                showProfile() {
                    alert('个人资料功能开发中...');
                },
                
                showSettings() {
                    this.activeNav = '系统设置';
                },
                
                logout() {
                    if (confirm('确定要退出登录吗？')) {
                        alert('退出登录成功');
                    }
                },
                
                // 初始化图表
                initCharts() {
                    // 文件类型分布图表
                    const fileTypeCtx = document.getElementById('fileTypeChart').getContext('2d');
                    new Chart(fileTypeCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['视频', '音频', '图片', '文档'],
                            datasets: [{
                                data: [45, 25, 20, 10],
                                backgroundColor: ['#F44336', '#2196F3', '#4CAF50', '#FF9800']
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                }
            },
            
            mounted() {
                // 从本地存储加载主题设置
                const savedDarkMode = localStorage.getItem('darkMode');
                if (savedDarkMode !== null) {
                    this.darkMode = savedDarkMode === 'true';
                }
                
                // 初始化图表
                this.$nextTick(() => {
                    this.initCharts();
                });
                
                // 模拟实时更新
                setInterval(() => {
                    this.tasks.forEach(task => {
                        if (task.progress < 100) {
                            task.progress = Math.min(task.progress + 1, 100);
                        }
                    });
                }, 3000);
            }
        });

        app.use(vuetify);
        app.mount('#app');
    </script>
</body>
</html>